## Django Migrations Under the Hood

### By laixintao

---

## ÂÖ≥‰∫éÊàë


- „ÄäÊçïËõáËÄÖËØ¥„ÄãFM(@laike9m @Manjusaka @Adam)
- „ÄäPythonÂπ∂Ë°åÁºñÁ®ã„ÄãÁøªËØëÔºàËøòÊ≤°ÂÆåÊàêÔºâ
- pingtop, git-ext, iredis, etc.
- ‰ªé2016Âπ¥ÂºÄÂßãÂÜô Python (Django1.8)

![auto-complete](assets/auto-complete.png)

+++

## Á¨¨‰∏Ä‰∏™ Django È°πÁõÆ

- ‰∏Ä‰∏™‰∫∫ÂÆåÊàêÂºÄÂèë„ÄÅÈÉ®ÁΩ≤„ÄÅÂâçÂêéÁ´ØÔºõ
- ÂåÖÊã¨Ê≥®ÂÜåÁôªÂΩï„ÄÅÊ¥ªÂä®ÂèëÂ∏É„ÄÅÊä•Âêç‰ªòÊ¨æÔºåÈÄöÁü•Ôºõ
- ‰ªçÂú®Á∫ø‰∏äËøêË°åÔºà3Âπ¥ÔºâÔºõ

+++

## ‰ΩÜÊòØ...
### ÂÖ∂ÂÆûÊàë‰∏ç‰ºöSQL...

+++

- `python manage.py makemigrations` & `python manage.py migrate` for DDL
- `python manage.py shell` for query and DML

+++

## ËøôÂ∞±ÊòØ Django ÔºÅ

> The web framework for perfectionists with deadlines.

---?color=#ffcfdf

## Table of Contents

- üëâ Django Migraiton ÁöÑÂäüËÉΩ
- Â∑•‰ΩúÂéüÁêÜ
- Áî®Ê≥ïÂíåÂ∏∏ËßÅÈóÆÈ¢ò
- Django ÁöÑÈÄâÊã©

+++

## Migration ÊòØÂÅö‰ªÄ‰πàÁöÑÔºü

1. Django Ë¥üË¥£ CURD
2. Êï∞ÊçÆÂ≠òÂÇ®Âú® MySQLÔºàÊàñËÄÖÂÖ∂‰ªñSQLÊï∞ÊçÆÂ∫ì‰∏≠Ôºâ
3. Django ORM Ë¥üË¥£Êï∞ÊçÆÂ∫ìÁöÑ Table Âíå Python Class ÂØπÂ∫î
4. Migrations Â∞±ÊòØÊï∞ÊçÆÂ∫ìÁªìÊûÑÁöÑ Version Control SystemÔºÅ

+++

![](./assets/django-migrations-ppt/django-migrations-usage.png)

```python
class Person(models.Model):
    name = models.CharField(max_length=64)
    age = models.IntegerField()
```

Êò†Â∞ÑÂà∞...

```SQL
mysql root@localhost:django_example> describe app1_person;
+-------+-------------+------+-----+---------+----------------+
| Field | Type        | Null | Key | Default | Extra          |
+-------+-------------+------+-----+---------+----------------+
| id    | int(11)     | NO   | PRI | <null>  | auto_increment |
| name  | varchar(64) | NO   |     | <null>  |                |
+-------+-------------+------+-----+---------+----------------+
```

+++

### ‰∏∫‰ªÄ‰πàÈúÄË¶Å migrationsÔºü

- Â¶ÇÊûúÊ≤°ÊúâÊï∞ÊçÆÂ∫ìÁªìÊûÑËøÅÁßªÊú∫Âà∂ÁöÑËØùÔºåÈúÄË¶ÅÊâãÂä®Âú®‰ª£Á†ÅÂíåË°®ÁªìÊûÑ‰πãÈó¥ÂêåÊ≠•Ôºõ
- Âõ¢ÈòüÂçè‰Ωú‰ºöÂæàÊ∑∑‰π±Ôºõ
- Â§ö‰∏™ÁéØÂ¢ÉÈÉ®ÁΩ≤‰ºöÂæàÊ∑∑‰π±Ôºõ
- ÊâãÂä®ÂèòÊõ¥Èöæ‰ª•ËøΩË∏™Ôºõ

+++

### Django migrations Â∏ÆÂä©‰Ω†

- Ëá™Âä®ÁîüÊàêÂØπÂ∫îÁöÑË°®ÁªìÊûÑÔºõ
- ËÆ∞ÂΩïÊØè‰∏ÄÊ¨°ÂèòÊõ¥ÔºåÂÜÖÁΩÆÁöÑÂõûÊªöÊñπÊ°àÔºõ
- ‚ÄúÂ£∞ÊòéÂºè‚ÄùÔºåÂèØ‰ª•Ë¢´ÈáçÂ§çÊâßË°åÔºåÁªìÊûúÂπÇÁ≠âÔºàËøôÊÑèÂë≥ÁùÄËß£ÂÜ≥‰∫ÜÂ§öÁéØÂ¢ÉÁöÑÈóÆÈ¢òÔºâÔºõ

---?color=#ffcfdf

## Table of Contents

- Django Migraiton ÁöÑÂäüËÉΩ
- üëâ Â∑•‰ΩúÂéüÁêÜ
- Áî®Ê≥ïÂíåÂ∏∏ËßÅÈóÆÈ¢ò
- Django ÁöÑÈÄâÊã©

+++

### Django migrations ÊòØÂ¶Ç‰ΩïÂ∑•‰ΩúÁöÑÔºü

1. Ëá™Âä®ÁîüÊàêÊØè‰∏ÄÊ¨°ÁöÑÊï∞ÊçÆÂ∫ìÂèòÊõ¥Ôºõ
2. ÊâßË°åÊï∞ÊçÆÂ∫ìÂèòÊõ¥Ôºõ

+++

### ÈáçÂ§çÊâßË°åÊ≤°ÊúâÂâØ‰ΩúÁî®

```
$ python manage.py makemigrations
No changes detected
```

+++?color=#ffffff

## ÁîüÊàêÂèòÊõ¥

```
$ python manage.py makemigrations
```

![](./assets/django-migrations-ppt/django-orm.png)

+++

### Ê≠•È™§

1. Â∫îÁî®ÂéÜÂè≤ÁöÑÂèòÊõ¥ÔºåÂæóÂà∞‰∏äÊ¨°ÊúÄÊñ∞ÁöÑÁªìÊûÑ AÔºõ
2. ÂØπÊØîÂΩìÂâçÁöÑ Model BÔºõ
3. ÁîüÊàê‰ªé A Áä∂ÊÄÅËøÅÁßªÂà∞ B Áä∂ÊÄÅÁöÑÂèòÊõ¥;

+++

- ËøôÊ≠•‰∏çÈúÄË¶ÅËøûÊé•Êï∞ÊçÆÂ∫ìÔºõ
- O(n) Êìç‰ΩúÔºåÂ¶ÇÊûúÂéÜÂè≤ÁöÑ migrations ÂæàÂ§ö‰∫ÜÔºåËÄóÊó∂‰ºöÂæàÈïøÔºõ
- ‰∏çËÉΩÊúâÊ≠ß‰πâ;

+++

ÊääËøô‰∏™ËøáÁ®ãÊÉ≥Ë±°Êàê‰∏äÂ∏ùÂú®ÁúãÁùÄ‰Ω†‰∏ãÊ£ã„ÄÇ

‰ΩÜÊòØ‰ªñ‰∏ç‰ºöËÆ∞‰ΩèÊØè‰∏ÄÊ≠•Ôºå

ÊØèÂΩì‰Ω† makemigrations ÁöÑÊó∂ÂÄôÔºå

‰ªñ‰ºöËÆ∞‰∏ãÊù•ÊÄé‰πàÊää‰∏äÊ¨°ÁöÑÊ£ãÁõòÂèòÊàêÁé∞Âú®ÁöÑÊ†∑Â≠ê„ÄÇ

![](./assets/django-migrations-ppt/chess.png)

+++

### Ê≠ß‰πâ

![](./assets/django-migrations-ppt/fields.png)

+++

a -> b ?

a -> c ?

```
Did you rename person.inta to person.intc (a IntegerField)? [y/N] N
Did you rename person.intb to person.intc (a IntegerField)? [y/N] y
Did you rename person.inta to person.intd (a IntegerField)? [y/N] N
```

+++

## ÊâßË°åÂèòÊõ¥

```
$ python manage.py migrate
```

+++

### ÈáçÂ§çÊâßË°å‰∏ç‰ºöÂ∏¶Êù•ÂâØ‰ΩúÁî®

```
$ python manage.py migrate
Running migrations:
  No migrations to apply.
```

+++

### migrate ÂÅö‰∫Ü‰ªÄ‰πàÔºü

- ÁúüÊ≠£ÂºïËµ∑Êï∞ÊçÆÂ∫ìÁªìÊûÑÊîπÂèòÁöÑÊìç‰ΩúÔºõ
- Â∞Ü migration files ÁøªËØëÊàê SQL Âπ∂ÊâßË°åÔºõ
- ËÆ∞ÂΩï migrate ÊâßË°åÂà∞Âì™‰∏ÄÊ¨°‰∫Ü;

```Python
  File: app1/migrations/0006_auto_20190912_1150.py
  # Generated by Django 2.2.5 on 2019-09-12 11:50

  from django.db import migrations, models


  class Migration(migrations.Migration):

      dependencies = [
          ('app1', '0005_auto_20190912_1149'),
      ]

      operations = [
          migrations.RenameField(
              model_name='person',
              old_name='intb',
              new_name='intc',
          ),
          migrations.RemoveField(
              model_name='person',
              name='inta',
          ),
          migrations.AddField(
              model_name='person',
              name='intd',
              field=models.IntegerField(default=None),
              preserve_default=False,
          ),
      ]
```

+++

### Â¶Ç‰ΩïÈò≤Ê≠¢ SQL ÈáçÂ§çÊâßË°åÔºü

```SQL
mysql root@localhost:django_example> SELECT * FROM django_migrations LIMIT 3;
+----+--------------+--------------+----------------------------+
| id | app          | name         | applied                    |
+----+--------------+--------------+----------------------------+
| 1  | contenttypes | 0001_initial | 2019-09-08 09:08:51.254479 |
| 2  | auth         | 0001_initial | 2019-09-08 09:08:51.355292 |
| 3  | admin        | 0001_initial | 2019-09-08 09:08:51.544356 |
+----+--------------+--------------+----------------------------+
```

+++

### unapply ÂäüËÉΩ

```Python
‚ûú python manage.py migrate app1 0001
Operations to perform:
  Target specific migration: 0001_initial, from app1
Running migrations:
  Rendering model states... DONE
  Unapplying app1.0003_remove_person_intc... OK
  Unapplying app1.0002_remove_person_intn... OK
‚ûú python manage.py migrate app1 0002
Operations to perform:
  Target specific migration: 0002_remove_person_intn, from app1
Running migrations:
  Applying app1.0002_remove_person_intn... OK
```

+++

### ÊÄªÁªì

1. Django Áî®‰πãÂâçÁöÑ migrations Êñá‰ª∂‰Ωú‰∏∫‰∏ä‰∏Ä‰∏™Áä∂ÊÄÅÁöÑ source of truthÔºåÂíåÂΩìÂâç
Áä∂ÊÄÅ‰ΩúÂØπÊØîÔºåÂæóÂà∞ diff ÁîüÊàêÊñ∞ÁöÑ migrationsÔºõ
2. Django Âú®Êï∞ÊçÆÂ∫ì‰∏≠Áî®‰∏ÄÂº†Ë°®ËÆ∞ÂΩïÂì™‰∫õ migrations Ë¢´ÊâßË°åËøá‰∫ÜÔºåÈò≤Ê≠¢ÈáçÂ§çÊâßË°åÔºõ

---?color=#ffcfdf

## Table of Contents

- Django Migraiton ÁöÑÂäüËÉΩ
- Â∑•‰ΩúÂéüÁêÜ
- üëâ Áî®Ê≥ïÂíåÂ∏∏ËßÅÈóÆÈ¢ò
- Django ÁöÑÈÄâÊã©

+++

## FAQ1

> Â∞Ü migrate Âä†ÂÖ•Âà∞ÂêØÂä®ÂëΩ‰ª§‰∏≠?

Êó¢ÁÑ∂ migrate ÊòØÂπÇÁ≠âÁöÑÔºåÊàëÊääËøô‰∏™Êìç‰ΩúÊîæÂà∞ Docker ÁöÑ CMD
‰∏≠ÔºåÊØèÊ¨°ÂêØÂä®‰πãÂâçËá™Âä®Â∫îÁî®Êñ∞ÁöÑÂèòÊõ¥ÔºàÂ¶ÇÊûúÊúâÔºâ.

What cloud go wrong?

+++

# DON'T DO THAT!

+++

# Why?

1. Â§öÂè∞Êú∫Âô®ÂêåÊó∂ÂêØÂä®ÂèØËÉΩÊçüÂùèË°®ÁªìÊûÑÔºõ
2. ÈªòËÆ§ÂΩìÂâçÁöÑÊï∞ÊçÆÁªìÊûÑÂè™‰ºöË¢´ÂΩìÂâçÁöÑ‰ª£Á†Å‰ΩøÁî®Ôºõ
(ÁÅ∞Â∫¶ÔºüÂõûÊªöÔºüÈÉΩ‰∏çÂèØË°å‰∫ÜÔºâ

+++

## ÊúÄ‰Ω≥ÂÆûË∑µ

1. Áî®‰∏Ä‰∏™ÂçïÁã¨ÁöÑ Docker image Êù•ÂÅö migrateÔºõ
2. migrate Ë¶ÅÂêëÂêéÂÖºÂÆπÔºàËøôÊòØÂè¶‰∏Ä‰∏™ÊïÖ‰∫ã‰∫ÜÔºâ

+++

## FAQ2

> migrate ÊâßË°åÂ§±Ë¥•

‰∏∫‰ªÄ‰πà‰ºöÂèëÁîüÔºü

Âõ†‰∏∫ `makemigrations` ÁöÑÊó∂ÂÄôÂπ∂Ê≤°ÊúâËøûÊé•Êï∞ÊçÆÂ∫ìÔºåÊòØÂü∫‰∫éÈÄªËæëÁîüÊàêÁöÑ„ÄÇÁúüÊ≠£ÊâßË°åÁöÑÊó∂ÂÄôÂèØËÉΩÂ§±Ë¥•„ÄÇ

+++

### Â¶Ç‰ΩïÊÅ¢Â§çÔºü

1. Â§çÂéüÂ∑≤ÁªèÊâßË°åËøáÁöÑÊìç‰ΩúÔºõ
2. Âà†Èô§ `django_migrations` ËÆ∞ÂΩïÔºõ
3. ‰øÆÂ§ç migrations Êñá‰ª∂Ôºõ
4. ÈáçÊñ∞ÊâßË°å„ÄÇ

+++

## FAQ3

> ‰∏∫‰ªÄ‰πàÊàëÊ≤°ÊúâÊîπÂä®‰ªª‰Ωï ModelsÔºå‰ΩÜÊòØÊØèÊ¨° `makemigrations` ÈÉΩ‰ºöÁîüÊàêÊñ∞ÁöÑÔºü

+++

### ËøòËÆ∞Âæó migrations ÊòØÊÄé‰πàÁîüÊàêÁöÑÂêóÔºü

![](./assets/django-migrations-ppt/django-orm.png)

+++

Model Âíå Migrations ÁªìÊûúÂØπÊØîÊØèÊ¨°ÈÉΩÊúâ diffÔºö

- ‰ª£Á†Å‰∏≠ÊòØ‰∏çÊòØÁî®‰∫ÜÁªìÊûú‰∏çÁ°ÆÂÆöÁöÑÊï∞ÊçÆÁªìÊûÑÔºüÔºàÊØîÂ¶Ç Python3.5 ‰πãÂâçÁöÑ dictÔºâ
- ‰ª£Á†Å‰∏≠ÊòØÂê¶Êúâ‰ª£Á†ÅÊØèÊ¨°ÊâßË°åÁöÑÁªìÊûúÊòØ‰∏çÁ°ÆÂÆöÁöÑÔºü

+++

## FAQ4

> ÊàëÂíåÂêå‰∫ãÂú®‰∏çÂêåÁöÑÂàÜÊîØÁîüÊàê‰∫Ü 000N Áõ∏ÂêåÁöÑ migrations ÊÄé‰πàÂäûÔºü

+++

```python
$ python manage.py makemigrations --merge
```

+++

## FAQ5

> migrations ÊâßË°åÂ§™ÊÖ¢‰∫Ü

+++

### ÈáçÂª∫ migrations

> Âõ†‰∏∫ migrations ËÆ∞ÂΩï‰∫ÜÊâÄÊúâÁöÑÂèòÊõ¥ÔºåÂ¶ÇÊûúËøô‰∫õÂèòÊõ¥Âú®‰∏ÄÊÆµÊó∂Èó¥‰πãÂêéÂØπÊàë‰ª¨‰∏çÂÜçÈáçË¶ÅÔºåÊàë‰ª¨ÂèØ‰ª•ÊääÂΩìÂâçÁöÑModelÁä∂ÊÄÅ‰Ωú‰∏∫ 0001 „ÄÇ

+++

### Ê≠•È™§

1. Â§á‰ªΩÊï∞ÊçÆÂ∫ìÂíåÊï¥‰∏™È°πÁõÆÔºõ
2. `ls */migrations/*.py | grep -v __init__ | xargs rm` Âà†Èô§ÂéÜÂè≤ migrations
3. ÈáçÊñ∞ `makemigrations`
4. Âà†Èô§ `django_migrations` ËÆ∞ÂΩïÔºõ
5. `python manage.py migrate --fake` Â°´ÂÖÖ `django_migrations` Êï∞ÊçÆÔºõ

+++

## FAQ6

> ÊòØÂê¶Â∫îËØ•Â∞ÜÁîüÊàêÁöÑ migrations Êñá‰ª∂ËøΩË∏™Âà∞ git ‰∏≠Ôºü

ÊòØÁöÑ„ÄÇ

+++

### Êèê‰∫§‰πãÂâçËøõË°åÊ£ÄÊü•

![](./assets/django-migrations-ppt/check-before-commit.png)

+++

### üí° Â∞ΩÈáèËÆ© migrations ÊúâÊÑè‰πâÔºåÂÉè git commit message ÈÇ£Ê†∑„ÄÇ

+++

## FAQ7

> ‰∏çË¶ÅÂÆ≥ÊÄïËá™Â∑±ÂÜô migrations

+++

ÂΩì‰Ω†ÊÉ≥Ôºö

1. ‰Ω†ÁöÑ Model ÂèòÂåñÂ§™Â§çÊùÇÔºåÊÉ≥Ë¶ÅËá™Â∑±ÂÜô Migrations ÁöÑÊó∂ÂÄôÔºõ
2. Âú® migrate ÁªìÊûÑÁöÑÂêåÊó∂ÔºåÊúâ‰∏Ä‰∫õÊï∞ÊçÆÈúÄË¶ÅÂèòÂåñÁöÑÊó∂ÂÄôÔºõ

+++

Áî® `python manage.py makemigrations --empty` ÁîüÊàê‰∏Ä‰∏™Á©∫ÁöÑÔºå
ÁÑ∂ÂêéËá™Â∑±ÂÜô„ÄÇ

+++

RunPython & RunSQL are you friends!

```Python

def my_editor(app, schema_editor):
    Person = app.get_model("app1", "Person")
    schema_editor.remove_field(Person, "age")


class Migration(migrations.Migration):

    dependencies = [("app1", "0001_initial")]

    operations = [migrations.RunPython(my_editor)]
```

+++

### Âá†ÁÇπË¶ÅÊ≥®ÊÑèÁöÑ‰∫ãÊÉÖ

1. `app.get_model`;
2. ‰∏çË¶ÅÂú® RunSQL ÈáåÈù¢ËÆ∞ÂΩïË°®ÁªìÊûÑÂèòÊõ¥;

---?color=#ffcfdf

## Table of Contents

- Django Migraiton ÁöÑÂäüËÉΩ
- Â∑•‰ΩúÂéüÁêÜ
- Áî®Ê≥ïÂíåÂ∏∏ËßÅÈóÆÈ¢ò
- üëâ Django ÁöÑÈÄâÊã©

+++

Django ÁöÑ migration ËÆæËÆ°Ôºö

1. migrations ËÆ∞ÂΩïÊØè‰∏ÄÊ¨°ÂèòÊõ¥Ôºõ
2. Êï∞ÊçÆÂ∫ì‰∏ÄÂº†metaË°®ËÆ∞ÂΩïÂèòÊõ¥ÁöÑÊâßË°åÊÉÖÂÜµÔºõ

+++

## Before Django Migrations

### Django-South

+++

- Django1.6 Âè™ÊîØÊåÅÂàõÂª∫Ë°®, ‰øÆÊîπModelÂè™ËÉΩËá™Â∑±Âéª‰øÆÊîπË°®Ôºõ
- Migrations ÊñπÊ°àÊ∑∑ÊùÇÔºåÂá†Âπ¥‰πãÂêéÔºåSouth Êàê‰∏∫‰∫ãÂÆûÊ†áÂáÜÔºõ
- South ÈÅáÂà∞‰∫ÜËá™Â∑±ÁöÑÁì∂È¢à, Andrew Â∏åÊúõÂ∞ÜmigrationsÂä†ÂÖ•Âà∞ Django core ‰∏≠ÔºåÂÆåÂÖ®Êõø‰ª£South;
- Á¨¨‰∏Ä‰∏™ [Pull Request](https://github.com/django/django/pull/376) Êº´ÈïøËÄåÂ§çÊùÇ(~7k changes)ÔºåËøôÈ°πÂ∑•‰ΩúÂ∞ÜÊº´ÈïøËÄåÂõ∞Èöæ;
- Andrew ÂèëËµ∑[‰ºóÁ≠π](https://www.kickstarter.com/projects/andrewgodwin/schema-migrations-for-django)ÔºåÂ∏åÊúõÊØèÂë®ÊäïÂÖ•80Â∞èÊó∂Âà∞ËøôÈ°πÂ∑•‰Ωú‰∏≠Ôºõ
- ‰ºóÁ≠πÂèëËµ∑1Â∞èÊó∂ÂÆåÊàê‰∫ÜÁõÆÊ†áÔºå4Â∞èÊó∂Á≠πÈõÜ $7000Ôºõ
- Django1.7 ÂºÄÂßãÊîØÊåÅmigrations üéâ

+++

### Django-South

```Python
  class Migration(SchemaMigration):

      def forwards(self, orm):
          # Adding field 'Knight.name'
          db.add_column('app1_knight', 'name',
                        self.gf('django.db.models.fields.CharField')(default='', max_length=100),
                        keep_default=False)


      def backwards(self, orm):
          # Deleting field 'Knight.name'
          db.delete_column('app1_knight', 'name')


      models = {
          'app1.knight': {
              'Meta': {'object_name': 'Knight'},
              'dances_whenever_able': ('django.db.models.fields.BooleanField', [], {'default': 'False'}),
              'id': ('django.db.models.fields.AutoField', [], {'primary_key': 'True'}),
              'name': ('django.db.models.fields.CharField', [], {'max_length': '100'}),
              'of_the_round_table': ('django.db.models.fields.BooleanField', [], {'default': 'False'})
          }
      }

      complete_apps = ['app1']
```

+++

### Django Migrations vs Django-South

- Django migrations Ê≤°ÊúâÂÜô backwards
- Django migrations Ê≤°Êúâ modelsÔºåÈúÄË¶Å‰ªéÁ¨¨‰∏Ä‰∏™migrationsÂºÄÂßã‰æùËµñÔºåSouth Âè™‰æùËµñÂâç‰∏Ä‰∏™

Django migrations ÂØπÂºÄÂèëËÄÖÊõ¥ÂèãÂ•ΩÔºåSouth ÂÜó‰Ωô‰ø°ÊÅØË∑üÂ§öÔºåÈÄüÂ∫¶Êõ¥Âø´

+++

Django ËøôÊ†∑ÁöÑËÆæËÆ°ÁªôÊàë‰ª¨‰ªÄ‰πàÔºü

1. Model ÁöÑ source of truth;
2. ÂèòÊõ¥ÂéÜÂè≤ËÆ∞ÂΩï;
3. ‰ΩÜÊòØÊ≤°ÊúâÈöêËóèÊâÄÊúâÁöÑ‰∫ãÊÉÖÔºåmigrations ÂèØ‰ª•Ë¢´‰∫∫‰∏∫Âπ≤Ê∂âÔºõ
4. Êñπ‰æø‰∫∫Â∑•ÁºñËæë;

+++

## Êàë‰ª¨Êù•Áúã‰∏Ä‰∏ãÂÖ∂‰ªñÁöÑÊñπÊ°à

+++

### Ê≤°Êúâ migrations

- Áõ¥Êé•ÂØπÊØî‰ª£Á†Å‰∏≠ÁöÑ Model ÂíåÊï∞ÊçÆÂ∫ìÁöÑ Table
- Ê∂àÈô§ diff

### Áº∫ÁÇπ

- ËøÅÁßªËøáÁ®ã‰∏çÈÄèÊòéÔºå‰∏çÂèØÊéßÂà∂

+++

## Êúâ migrate Ë°®‰ΩÜÊòØ‰∏çËÆ∞ÂΩï migrations

+++

## automigrate

https://github.com/abe-winter/automigrate

+++

## ‰∏Ä‰∫õÂèçÂØπ ORM ÁöÑÂ£∞Èü≥

- ORM ÂºïÂÖ•‰∫ÜÊñ∞ÁöÑÁêÜËß£ÊàêÊú¨ÔºåÂ§ßÂÆ∂Â∑≤ÁªèÈÉΩÁÜüÊÇâSQL‰∫ÜÔºõ
- ORM Âπ∂Ê≤°ÊúâÂ±èËîΩÊâÄÊúâÁöÑÈóÆÈ¢òÔºå‰ºöÈÅáÂà∞Âè™ËÉΩÂÜôSQLÊâçËÉΩËß£ÂÜ≥Ôºõ
- Â¢ûÂä†‰∫ÜËß£ÂÜ≥ÈóÆÈ¢òÁöÑÂ§çÊùÇÊÄßÔºåÂíå‰∫ÜËß£‰∫ãÂÆûÁöÑÂ§çÊùÇÊÄßÔºõ

+++

> Exactly this, I tend to write plain SQL nowadays since you eventually have to work around some ORM specific problems in the end. 

https://lobste.rs/s/ihqxej/orms_are_backwards#c_0x76xn


---?color=#fefdca

# Thanks!

- Blog: https://www.kawabangga.com/
- Slide Âú∞ÂùÄÔºö https://github.com/laixintao/django-migrations-under-the-hood
